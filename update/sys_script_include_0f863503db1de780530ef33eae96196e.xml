<?xml version="1.0" encoding="UTF-8"?>
<record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_glom_vln.NotificationUtils</api_name>
        <client_callable>false</client_callable>
        <description/>
        <name>NotificationUtils</name>
        <script><![CDATA[var NotificationUtils = Class.create();
NotificationUtils.prototype = {
    initialize: function() {
    },
	
	prazo_romper_estimativa: function(){//Script para Notificação quando faltar 7 dias para romper o limite de risco.
	var gr = new GlideRecord('x_glom_vln_requisicoes');
	/*
	var event = new x_glom_vln.romper_limite_risco();
	var acordo_de_risco = gr.acordo_de_risco;//data limite para o risco
	if(acordo_de_risco != undefined){
	var aux_risco = new GlideDateTime(acordo_de_risco);
	var acordo_risco = aux_risco.getDate();
	var aux_now = new GlideDateTime();//Data de agora
	aux_now.addDaysUTC(7);//Data de agora somando 7 dias
	var now = aux_now.getDate();
	var state = gr.state;
	var substatus = gr.substatus;*/
	gr.addQuery('sys_id','ef1fb5c3db1de780530ef33eae961976');
	gr.query();
	while(gr.next()){
	gs.eventQueue('x_glom_vln.romper_limite_risco', gr);
	gr.descricao = 'agora vai';
	gr.update();
	/*if(acordo_risco == now && state == 104 && substatus == 204){
	
		}
		else{
		answer = false;
		}
	}*/

}

	},
	
	
    type: 'NotificationUtils'
};]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>alpar.arthur</sys_created_by>
        <sys_created_on>2018-10-26 14:15:06</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_id>0f863503db1de780530ef33eae96196e</sys_id>
        <sys_mod_count>15</sys_mod_count>
        <sys_name>NotificationUtils</sys_name>
        <sys_package display_value="Vulnerabilidade" source="x_glom_vln">3eacb81c0f96d300fd7f91dbe1050efe</sys_package>
        <sys_policy>read</sys_policy>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Vulnerabilidade">3eacb81c0f96d300fd7f91dbe1050efe</sys_scope>
        <sys_update_name>sys_script_include_0f863503db1de780530ef33eae96196e</sys_update_name>
        <sys_updated_by>luiz.junior</sys_updated_by>
        <sys_updated_on>2018-10-26 19:25:28</sys_updated_on>
    </sys_script_include>
</record_update>
